<div class="navbar-secondary">

  <ul>
    <li class="navbar-secondary__item active">
      <span ng-bind="::manage.strings.COPY_MANAGE"></span>
    </li>
  </ul>
  <h4 class="sub-title" ng-bind="manage.activity.title"></h4>
</div>
<div class="container-fluid">
  <div ui-view class="lateral-fade">
      <div class="col-md-11 col-md-offset-1">
        <p class="text-muted" ng-bind="manage.strings.COPY_ORDERS"></p>
        <div ng-if="manage.calendars.length > 0" class="row">
            <div class="col-md-12">
                <div class="panel panel-default" style="cursor: pointer;"
                     ng-repeat="calendar in manage.calendars track by calendar.id">
                    <div class="panel-heading" ng-click="manage.expandCalendar(calendar,manage.TYPE_ORDER)">
                        <div class="row">
                            <div class="panel-date">
                                <span>
                                    <span>
                                        <strong ng-bind="::manage.strings.LABEL_CALENDAR"></strong>
                                    </span>
                                    <br/>
                                    <span ng-bind="::calendar.fromDate"></span>
                                </span>
                            </div>
                            <div class="panel-date">
                                <span>
                                    <span>
                                        <strong ng-bind="::manage.strings.COPY_CLOSING_DATE"></strong>
                                    </span>
                                    <br/>
                                    <span ng-bind="::calendar.toDate"></span>
                                </span>
                            </div>
                            <div class="panel-counter">
                                <span>
                                    <strong class="numbers"><span ng-bind="calendar.assistants.length"></span>/<span ng-bind="calendar.capacity"></span></strong> <span ng-bind="manage.strings.COPY_SEATS"></span>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="{{(calendar.assistants.length/calendar.capacity)*100}}" aria-valuemin="0" aria-valuemax="100" style="width: {{(calendar.assistants.length/calendar.capacity)*100}}%">
                                        </div>
                                    </div>
                                </span>
                            </div>
                            <i class=" expand mdi-hardware-keyboard-arrow-down"></i>
                        </div>
                    </div>

                    <div class="panel-body" data-toggle="manage.activeCalendar.id == calendar.id" trulii-expandable-content>
                        <!-- Orders -->
                        <div >
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label sr-only"
                                               ng-bind="::manage.strings.LABEL_SEARCH"></label>
                                        <div class="input-group">

                                          <input class="form-control floating-label" type="text"
                                          ng-model="manage.queries.orderQuery"
                                          ng-change="manage.updateByQuery(manage.TYPE_ORDER)"
                                          placeholder="{{manage.strings.COPY_SEARCH}}">
                                          <span class="input-group-addon">
                                            <i class="mdi-action-search"></i>
                                          </span>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="table-responsive" ng-if="manage.orders.length > 0">
                              <table class="table table-hover table-striped table-dark">
                                <tr class="text-center">
                                  <th><strong ng-bind="::manage.strings.HEADER_ORDER"></strong></th>
                                  <th><strong ng-bind="::manage.strings.HEADER_MADE"></strong></th>
                                  <th><strong ng-bind="::manage.strings.HEADER_AMOUNT"></strong></th>
                                  <th><strong ng-bind="::manage.strings.HEADER_STATUS"></strong></th>
                                  <th></th>
                                </tr>
                                <tr ng-repeat="order in manage.orders track by order.id | filter:manage.orderQuery">
                                  <td>
                                    <strong>#<span ng-bind="::order.id"></span></strong>
                                  </td>
                                  <td>
                                    <span class="text-capitalize"  ng-bind="::order.created_at | date:'EEEE d MMM y'"></span>
                                  </td>
                                  <td>
                                    <span ng-class="::{'text-strike': order.is_free}" 
                                            ng-bind="::(order.amount | currency:$:0)"></span>
                                    <span ng-show="::order.is_free"
                                            ng-bind="::manage.strings.COPY_FREE"></span>

                                  </td>
                                  <td>
                                    <span ng-bind="::order.status"></span>
                                  </td>
                                  <td class="column-button">
                                    <a ui-sref="dash.activities-manage.orders.order({'orderId': order.id})">
                                      <button class="btn btn-default" ng-bind="::manage.strings.ACTION_VIEW_DETAIL">
                                      </button>
                                    </a>
                                  </td>
                                </tr>
                              </table>
                            </div>
                            <div class="order-total" ng-if="manage.orders.length > 0">
                              <!--TO-DO Fix Style like invision-->
                              <div class="col-xs-12">
                                <ul class="list-unstyled list-inline text-center">
                                  <li>
                                    <span ng-bind="::manage.strings.LABEL_TOTAL"></span>
                                    <i class="glyphicon glyphicon-question-sign" aria-hidden="true" tooltip-placement="right"  tooltip="{{::manage.strings.COPY_TOTAL_SALES_TOOLTIP}}"></i>
                                    <span ng-bind="manage.total | currency:$:0"></span>
                                  </li>
                                  <li>
                                    <span ng-bind="::manage.strings.LABEL_FEE"></span>
                                    <span ng-bind="manage.totalWithFee | currency:$:0"></span>
                                    <i class="glyphicon glyphicon-question-sign" aria-hidden="true" tooltip-placement="right"  tooltip="{{::manage.strings.COPY_TOTAL_FEE_TOOLTIP}}"></i>
                                  </li>
                                  <li>
                                    <strong ng-bind="::manage.strings.LABEL_FINAL_TOTAL"></strong>
                                    <i class="glyphicon glyphicon-question-sign" aria-hidden="true" tooltip-placement="right"  tooltip="{{::manage.strings.COPY_FINAL_TOTAL_SALES_TOOLTIP}}"></i>
                                    <strong ng-bind="manage.netTotal | currency:$:0"></strong>
                                  </li>
                                </ul>
                              </div>

                            </div>
                        </div>
                        <!--If there are no assistants-->
                        <div ng-if="manage.orders.length <= 0" class="row">
                          <br/>
                          <div class="col-md-12">
                            <h4 ng-bind="::manage.strings.LABEL_EMPTY_ORDERS"></h4>
                            <p ng-show="transactions.salesPaginationOpts.totalItems > 0" ng-bind="::manage.strings.COPY_EMPTY_ORDERS"></p>
                          </div>
                        </div>
                    </div>
                </div>
                <pagination class="pagination-sm"
                            ng-model="manage.calendarPaginationOpts.pageNumber"
                            ng-change="manage.pageChange(manage.TYPE_CALENDAR)"
                            data-total-items="manage.calendarPaginationOpts.totalItems"
                            data-items-per-page="manage.calendarPaginationOpts.itemsPerPage"
                            previous-text="&lsaquo;" next-text="&rsaquo;" rotate="false"
                            max-size="manage.calendarPaginationOpts.maxPagesSize"></pagination>
            </div>
        </div>
      </div>

  </div>


</div>
