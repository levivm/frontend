<div class="container">
    <div ng-if="enroll.isAnonymous()" class="row">
        <div class="col-md-10 col-md-offset-1">
            <h1 ng-bind="::enroll.strings.COPY_SIGN_UP"></h1>
            <br/>
            <h4>
                <span ng-bind="::enroll.strings.COPY_ONE_MORE_STEP"></span>
                <a ui-sref="login({{enroll.stateInfo}})" ng-bind="::enroll.strings.ACTION_LOGIN"></a>
            </h4>
            <h4>
                <span class="text-muted" ng-bind="::enroll.strings.COPY_NO_ACCOUNT"></span>
                <a ui-sref="register({{enroll.stateInfo}})" ng-bind="::enroll.strings.ACTION_REGISTER"></a>
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <div class="panel panel-dark">
                <div class="panel-heading">
                    <h4 ng-bind="::enroll.strings.LABEL_ACTIVITY_INFO"></h4>
                </div>
                <div class="panel-body">
                    <h3 ng-bind="enroll.activity.title"></h3>
                    <h4 class="text-muted" ng-bind="enroll.activity.content"></h4>
                    <div class="form-group">
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <tr class="text-center">
                                    <th ng-bind="::enroll.strings.LABEL_START_DATE"></th>
                                    <th ng-bind="::enroll.strings.LABEL_NUMBER_OF_SESSIONS"></th>
                                    <th ng-bind="::enroll.strings.LABEL_AVAILABLE_SEATS"></th>
                                    <th ng-bind="::enroll.strings.LABEL_PRICE"></th>
                                    <th ng-bind="::enroll.strings.LABEL_QUANTITY"></th>
                                </tr>
                                <tr class="text-center">
                                    <td><span ng-bind="::enroll.calendar.initial_date | date:'dd MMMM yyyy'"></span></td>
                                    <td><span ng-bind="::enroll.calendar.number_of_sessions"></span></td>
                                    <td>
                                        <span ng-bind="::(enroll.calendar.capacity - enroll.calendar.assistants.length)"></span>
                                    </td>
                                    <td><span ng-bind="::enroll.calendar.session_price | currency"></span></td>
                                    <td class="text-center">
                                        <button class="btn btn-info btn-xs" ng-click="enroll.minus()"
                                                style="cursor: pointer;">-</button>
                                        <span ng-bind="enroll.quantity"></span>
                                        <button class="btn btn-info btn-xs" ng-click="enroll.plus()">+</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3">
                                        <strong><span ng-bind="::enroll.strings.LABEL_TOTAL"></span></strong>
                                    </td>
                                    <td colspan="2" class="text-right">
                                        <span ng-bind="enroll.amount | currency"></span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <tr class="text-center">
                                <th colspan="2" ng-bind="::enroll.strings.LABEL_SCHEDULES"></th>
                            </tr>
                            <tr ng-repeat="session in enroll.calendar.sessions">
                                <td>
                                    <span ng-bind="session.date | date:'EEEE, dd MMMM'"></span>
                                </td>
                                <td class="text-right">
                                    <span ng-bind="session.start_time | date:'h:mma'"></span>
                                    <span> - </span>
                                    <span ng-bind="session.end_time | date:'h:mma'"></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <form class="form-horizontal" name="enroll.enrollForm" novalidate
          ng-submit="enroll.enroll()" ng-show="!enroll.success">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div class="panel panel-dark">
                    <div class="panel-heading">
                        <h4 ng-bind="::enroll.strings.LABEL_ASSISTANTS"></h4>
                    </div>
                    <div class="panel-body">
                        <h4 class="text-muted">
                            <span ng-bind="::enroll.strings.COPY_UNTIL_NOW"></span>
                            <ng-pluralize count="enroll.calendar.assistants.length"
                                          when="{
                                '0': enroll.strings.COPY_NO_ASSISTANTS,
                                'one': enroll.strings.COPY_ONE_ASSISTANT,
                                'other': enroll.strings.COPY_MANY_ASSISTANTS
                              }"
                                    >
                            </ng-pluralize>
                        </h4>
                        <br/>
                        <fieldset>
                            <div ng-repeat="assistant in enroll.assistants">
                                <h4><span ng-bind="::enroll.strings.COPY_ASSISTANT_NUMBER"></span>
                                    <span ng-bind="$index + 1"></span>
                                </h4>
                                <div class="row form-group" trulii-input-errors-control="first_name">
                                    <label class="control-label col-md-2"
                                           ng-bind="::enroll.strings.LABEL_FIRST_NAME"></label>
                                    <div class="col-md-8">
                                        <input class="form-control" name="first_name" type="text"
                                               placeholder="{{::enroll.strings.LABEL_FIRST_NAME}}"
                                               ng-model="assistant.first_name" required/>
                                    </div>
                                </div>
                                <div class="form-group" trulii-input-errors-control="last_name">
                                    <label class="control-label col-md-2"
                                           ng-bind="::enroll.strings.LABEL_LAST_NAME"></label>
                                    <div class="col-md-8">
                                        <input class="form-control" name="last_name" type="text"
                                               ng-model="assistant.last_name"
                                               placeholder="{{::enroll.strings.LABEL_LAST_NAME}}" required/>
                                    </div>
                                </div>
                                <div class="form-group" trulii-input-errors-control="email">
                                    <label class="control-label col-md-2" ng-bind="::enroll.strings.LABEL_EMAIL"></label>
                                    <div class="col-md-8">
                                        <input class="form-control col-md-2" name="email" type="email"
                                               ng-model="assistant.email"
                                               placeholder="{{::enroll.strings.LABEL_EMAIL}}"
                                               required/>
                                    </div>
                                </div>
                                <hr/>
                            </div>
                            <div class="form-group" trulii-input-errors-control="detail">
                                <input type="hidden" name="detail"/>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div class="panel panel-dark">
                    <div class="panel-heading">
                        <h4 ng-bind="::enroll.strings.LABEL_PAYMENT_INFO"></h4>
                    </div>
                    <div class="panel-body">
                        <div class="col-md-8 col-md-offset-2 separate-above">
                            <div class="form-group">
                                <label for="cardHolder" ng-bind="::enroll.strings.LABEL_CARD_HOLDER"></label>
                                <input type="text" class="form-control" id="cardHolder"
                                       ng-model="enroll.cardData.name_card"
                                       placeholder="{{::enroll.strings.PLACEHOLDER_CARD_HOLDER}}">
                            </div>
                            <div class="form-group">
                                <label for="cardNumber" ng-bind="::enroll.strings.LABEL_CARD_NUMBER"></label>
                                <input type="text" class="form-control" id="cardNumber"
                                       ng-model="enroll.cardData.number"
                                       ng-blur="enroll.getCardType()"
                                       placeholder="{{::enroll.strings.PLACEHOLDER_CARD_NUMBER}}">
                                <div class="form-group" trulii-input-errors-control="invalidNumber">
                                    <input type="hidden" name="invalidNumber"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 col-md-offset-2 separate-above">
                            <div class="form-group">
                                <span ng-bind="::enroll.strings.LABEL_EXPIRY_DATE"></span>
                            </div>
                            <div class="form-group" trulii-input-errors-control="invalidExpiry">
                                <input type="hidden" name="invalidExpiry"/>
                            </div>
                        </div>
                        <div class="col-md-3 col-md-offset-2">
                            <div class="form-group">
                                <label for="cardMonth" ng-bind="::enroll.strings.LABEL_MONTH"></label>
                                <input type="number" min=1 max=12 class="form-control" id="cardMonth"
                                       ng-model="enroll.cardData.exp_month"
                                       ng-blur="enroll.checkCardExpiry()"
                                       placeholder="{{::enroll.strings.PLACEHOLDER_MONTH}}">
                            </div>
                        </div>
                        <div class="col-md-4 col-md-offset-1">
                            <div class="form-group">
                                <label for="cardYear" ng-bind="::enroll.strings.LABEL_YEAR"></label>
                                <input type="number" class="form-control" id="cardYear"
                                       ng-model="enroll.cardData.exp_year"
                                       ng-blur="enroll.checkCardExpiry()"
                                       placeholder="{{::enroll.strings.PLACEHOLDER_YEAR}}">
                            </div>
                        </div>
                        <div class="col-md-3 col-md-offset-2">
                            <div class="form-group">
                                <p class="form-control-static"
                                   ng-show="enroll.cardData.method"
                                   ng-bind="enroll.cardData.method"></p>
                            </div>
                        </div>
                        <div class="col-md-4 col-md-offset-1">
                            <div class="form-group">
                                <label for="cardCvv" ng-bind="::enroll.strings.LABEL_CVV"></label>
                                <input type="text" class="form-control" id="cardCvv"
                                       ng-model="enroll.cardData.cvv"
                                       placeholder="{{::enroll.strings.PLACEHOLDER_CVV}}">
                            </div>
                        </div>
                        <!--<div class="col-md-8 col-md-offset-2">-->
                            <!--<div class="form-group">-->
                                <!--<div class="checkbox">-->
                                    <!--<label>-->
                                        <!--<input type="checkbox">-->
                                <!--<span class="checkbox-material">-->
                                    <!--<span class="check"></span>-->
                                <!--</span>-->
                                        <!--<span ng-bind="::enroll.strings.LABEL_SAVE_PAYMENT_INFO"></span>-->
                                    <!--</label>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</div>-->
                        <button type="submit" class="btn btn-lg btn-primary pull-right"
                                ng-bind="::enroll.strings.ACTION_ENROLL"></button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="row">
        <div class="col-md-10 col-md-offset-1 text-center">
            <span class="text-muted" ng-bind="::enroll.strings.COPY_RELEASE"></span>
        </div>
    </div>
</div>

<div ui-view></div>

<a class="btn btn-link" ui-sref="activities-detail.info({activity_id: enroll.activity.id})">
    <i class="mdi-navigation-chevron-left"></i>
    <span ng-bind="::enroll.strings.ACTION_RETURN"></span>
</a>
