<div class="container">
    <div ng-if="pc.isAnonymous()" class="row">
        <div class="col-md-8 col-md-offset-2">
            <h1>¿Quieres inscribirte en esta actividad?</h1>
            <br/>
            <h4>
                <span>¡Estás a un paso! </span>
                <a ui-sref="login({{pc.stateInfo}})">Inicia Sesion.</a>
            </h4>
            <h4>
                <span class="text-muted">¿No tienes cuenta en Trulii? ¡No hay problema! </span>
                <a ui-sref="register({{pc.stateInfo}})">Registrate</a>
            </h4>

        </div>
    </div>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <h1>Información de la Actividad</h1>

            <h3 ng-bind="pc.activity.title"></h3>
            <h4 class="text-muted" ng-bind="pc.activity.content"></h4>
            <br/>

            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <tr class="text-center">
                        <th>Fecha de Inicio</th>
                        <th>Nro. de Sesiones</th>
                        <th>Cupos restantes</th>
                        <th>Precio</th>
                        <th>Cantidad</th>
                    </tr>
                    <tr class="text-center">
                        <td><span ng-bind="::pc.calendar.initial_date | date:'dd MMMM yyyy'"></span></td>
                        <td><span ng-bind="::pc.calendar.number_of_sessions"></span></td>
                        <td><span ng-bind="::(pc.calendar.capacity - pc.calendar.assistants.length)"></span></td>
                        <td><span ng-bind="::pc.calendar.session_price | currency"></span></td>
                        <td class="text-center">
                            <button class="btn btn-info btn-xs" ng-click="pc.minus()" style="cursor: pointer;">-</button>
                            <span>{{ pc.quantity }}</span>
                            <button class="btn btn-info btn-xs" ng-click="pc.plus()">+</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <span><strong>Precio</strong></span>
                        </td>
                        <td colspan="2" class="text-right">
                            <span ng-bind="pc.amount | currency"></span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <tr class="text-center">
                        <th colspan="2">Cronogramas</th>
                    </tr>
                    <tr ng-repeat="session in pc.calendar.sessions">
                        <td>
                            <span ng-bind="session.date | date:'EEEE, dd MMMM'"></span>
                        </td>
                        <td class="text-right">
                            <span ng-bind="session.start_time | date:'h:mma'"></span>
                            <span> - </span>
                            <span ng-bind="session.end_time | date:'h:mma'"></span>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="separator"></div>
        </div>
    </div>
    <div ng-show="!pc.success">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <form class="form-horizontal" name="pc.enrollForm" novalidate ng-submit="pc.enroll()">
                    <h1>Asistentes</h1>
                    <h4 class="text-muted">
                        Hasta ahora
                        <ng-pluralize count="pc.calendar.assistants.length"
                                      when="{
                                    '0': 'esta actividad no tiene asistentes ¡Sé tú el primero!',
                                    'one': 'va 1 asistente ¡Faltas tú!',
                                    'other': 'van {} asistentes ¡Faltas tú!'
                                  }"
                            >
                        </ng-pluralize>
                    </h4>
                    <br/>
                    <fieldset>
                        <div ng-repeat="assistant in pc.assistants">
                            <h4>Asistente #<span ng-bind="$index + 1"></span></h4>
                            <div class="form-group">
                                <label class="control-label col-md-2">Nombre</label>
                                <div class="col-md-10">
                                    <input class="form-control" name="first_name" type="text"
                                           placeholder="Nombre"
                                           ng-model="assistant.first_name" required/>
                                </div>
                            </div>
                            <div class="errors" ng-show="pc.enrollForm.first_name.$invalid && !pc.enrollForm.first_name.$dirty">
                                <span>{{ pc.errors.assistants[$index].first_name[0] }}</span>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-2">Apellido</label>
                                <div class="col-md-10">
                                    <input class="form-control" name="last_name" type="text"
                                           ng-model="assistant.last_name"
                                           placeholder="Apellido" required/>
                                </div>
                                <div class="errors" ng-show="pc.enrollForm.last_name.$invalid && !pc.enrollForm.last_name.$dirty">
                                    <span>{{ pc.errors.assistants[$index].last_name[0] }}</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-2">Email</label>
                                <div class="col-md-10">
                                    <input class="form-control col-md-2" name="email" type="email"
                                           ng-model="assistant.email"
                                           placeholder="Email"
                                           required/>
                                </div>
                                <div class="errors" ng-show="pc.enrollForm.email.$invalid && !pc.enrollForm.email.$dirty">
                                    <span>{{ pc.errors.assistants[$index].email[0] }}</span>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-lg btn-primary pull-right">Inscribir</button>
                    </fieldset>
                </form>
                <div class="separator"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h1>Información de Pago</h1>
                <div class="separator"></div>
            </div>
        </div>
    </div>
</div>

<div ui-view></div>
