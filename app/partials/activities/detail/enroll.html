<!--PayU Script-->
<div class="hide">
    <p style="background:url(https://maf.pagosonline.net/ws/fp?id=9e07cde190aac1ff129e55a2396e20bf1)"></p>
    <img ng-src="{{enroll.appendPayUUniqueId('https://maf.pagosonline.net/ws/fp/clear.png?id=')}}">
    <script ng-src="{{enroll.appendPayUUniqueId('https://maf.pagosonline.net/ws/fp/check.js?id=')}}"></script>
    <object type="application/x-shockwave-flash"
            ng-data="{{enroll.appendPayUUniqueId('https://maf.pagosonline.net/ws/fp/fp.swf?id=')}}"
            width="1" height="1" id="thm_fp">
        <param name="movie" value="{{enroll.appendPayUUniqueId('https://maf.pagosonline.net/ws/fp/fp.swf?id=')}}"/>
    </object>
</div>
<div class="sidebar-popup" ng-show="enroll.showReimbursement">
    <div class="sidebar-background" ng-click="enroll.toggleReimbursement()"></div>
    <div class="col-xs-10 col-sm-8 col-md-6 sidebar-content">
        <div class="sidebar-header">
            <button class="pull-right" ng-click="enroll.toggleReimbursement()"><img class="img-responsive" src="/css/img/activity-enroll/close.png" alt=""/></button>
            <h1>Politicas de reembolso</h1>
        </div>
        <div class="sidebar-body">
            <h3 class="text-success">Does this unit have a soul?</h3>
            <br/>
            <p>
                If I die, I'm haunting you, Shepard. Life is a negotiation. We all want. We have to give to get what we want. I am the very model of a scientist salarian, Find peace in the embrace of the goddess. I’m all for second chances. Not so sure about third ones.
            </p>
            <p>
                Genophage modification project altered millions of lives. Then saw results. Ego, humility, juxtaposition. Frailty of life. Size of universe. Explored religions after work was completed. Different races. No answers. Many questions. Aware that you come by a great deal. Have had other species become attracted to me before. Awkward. Not interested. It’s always a good idea to RTFM, ma’am. I live a dangerous life. Dangerous men fit right in. You know what else is bad for business? A broken neck.
            </p>
            <p>
                Certainly possible. Would require strengthening exercises. Get muscles to support weaker bone structure. That is a joke. Mating between species? A pointless exercise. Trapped inside a Reaper. Could be worse. Don’t know how, but… I guess it could be full of rats. Humanity needs a hero. And Shepard’s the best we’ve got.
            </p>
        </div>
    </div>
</div>

<div class="sidebar-popup" ng-show="enroll.showTerms">
    <div class="sidebar-background" ng-click="enroll.toggleTerms()"></div>
    <div class="col-xs-10 col-sm-8 col-md-6 sidebar-content">
        <div class="sidebar-header">
            <button class="pull-right" ng-click="enroll.toggleTerms()"><img class="img-responsive" src="/css/img/activity-enroll/close.png" alt=""/></button>
            <h1>Terminos y condiciones</h1>
        </div>
        <div class="sidebar-body">
            <h3 class="text-success">Does this unit have a soul?</h3>
            <br/>
            <p>
                If I die, I'm haunting you, Shepard. Life is a negotiation. We all want. We have to give to get what we want. I am the very model of a scientist salarian, Find peace in the embrace of the goddess. I’m all for second chances. Not so sure about third ones.
            </p>
            <p>
                Genophage modification project altered millions of lives. Then saw results. Ego, humility, juxtaposition. Frailty of life. Size of universe. Explored religions after work was completed. Different races. No answers. Many questions. Aware that you come by a great deal. Have had other species become attracted to me before. Awkward. Not interested. It’s always a good idea to RTFM, ma’am. I live a dangerous life. Dangerous men fit right in. You know what else is bad for business? A broken neck.
            </p>
            <p>
                Certainly possible. Would require strengthening exercises. Get muscles to support weaker bone structure. That is a joke. Mating between species? A pointless exercise. Trapped inside a Reaper. Could be worse. Don’t know how, but… I guess it could be full of rats. Humanity needs a hero. And Shepard’s the best we’ve got.
            </p>
        </div>
    </div>
</div>

<div class="row">
    <div class="detail-cover">
        <img ng-src="{{enroll.activity.main_photo}}" alt="enroll.activity.title"/>
        <div class="text-container">
            <h2 ng-bind="enroll.strings.COPY_COVER"></h2>
            <h1><strong ng-bind="enroll.activity.title"></strong></h1>
        </div>
    </div>
</div>

<div class="row separate-above">
    <div class="col-md-7 col-md-offset-1">
        <!--If Anonymous-->
        <div ng-if="enroll.isAnonymous()" class="row">
            <div class="col-md-10 col-md-offset-1">
                <h1 ng-bind="::enroll.strings.COPY_SIGN_UP"></h1>
                <br/>
                <h4>
                    <span ng-bind="::enroll.strings.COPY_ONE_MORE_STEP"></span>
                    <a ui-sref="login({{enroll.stateInfo}})" ng-bind="::enroll.strings.ACTION_LOGIN"></a>
                </h4>
                <h4>
                    <span class="text-muted" ng-bind="::enroll.strings.COPY_NO_ACCOUNT"></span>
                    <a ui-sref="register({{enroll.stateInfo}})" ng-bind="::enroll.strings.ACTION_REGISTER"></a>
                </h4>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-12">
                <h2 ng-bind="enroll.strings.COPY_STARTING_ON"></h2>
                <h1><strong class="text-capitalize" ng-bind="enroll.calendar.initial_date | date:'MMM d, y'"></strong></h1>
                <h3>
                    <span ng-bind="enroll.calendar.vacancy"></span>
                    <span ng-bind="enroll.strings.COPY_VACANCY"></span></h3>
            </div>
        </div>
        <!--Sessions-->
        <div class="row separate-above">
            <div class="col-md-12">
                <div class="panel sessions-panel">
                    <div class="panel-heading">
                        <h4>
                            <img class="img-responsive inline-block"
                                 src="css/img/activity-enroll/section_sessions.png"
                                 alt="{{::enroll.strings.LABEL_ACTIVITY_SESSIONS}}"/>
                            <span ng-bind="::enroll.strings.LABEL_ACTIVITY_SESSIONS"></span>
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-4" ng-repeat="session in enroll.calendar.sessions">
                                <div class="session">
                                    <div class="text-capitalize">
                                        <strong ng-bind="session.date | date:'EEEE'"></strong>
                                    </div>
                                    <div class="text-capitalize">
                                        <strong ng-bind="session.date | date:'dd MMMM'"></strong>
                                    </div>
                                    <div class="separate-above-less">
                                        <span ng-bind="session.start_time | date:'h:mma'"></span>
                                        <span ng-bind="::enroll.strings.COPY_TO"></span>
                                        <span ng-bind="session.end_time | date:'h:mma'"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Attendees Form-->
        <form class="form-horizontal" name="enroll.enrollForm" novalidate
              ng-show="!enroll.success">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel attendees-panel">
                        <div class="panel-heading">
                            <h4>
                                <img class="img-responsive inline-block"
                                     src="css/img/activity-enroll/section_attendees.png"
                                     alt="{{::enroll.strings.LABEL_ASSISTANTS}}"/>
                                <span ng-bind="::enroll.strings.LABEL_ASSISTANTS"></span>
                            </h4>
                        </div>
                        <div class="panel-body">
                            <h4 class="text-muted">
                                <span ng-bind="::enroll.strings.COPY_UNTIL_NOW"></span>
                                <ng-pluralize count="enroll.calendar.assistants.length"
                                              when="{
                                    '0': enroll.strings.COPY_NO_ASSISTANTS,
                                    'one': enroll.strings.COPY_ONE_ASSISTANT,
                                    'other': enroll.strings.COPY_MANY_ASSISTANTS
                                  }"
                                        >
                                </ng-pluralize>
                            </h4>
                            <br/>
                            <h5 class="text-muted">Agrega la información de las personas que asistiran a la actividad</h5>
                            <fieldset>
                                <div class="row">
                                    <div class="col-md-6" ng-repeat="assistant in enroll.assistants">
                                        <div class="card">
                                            <div class="row separate-above">
                                                <div class="col-md-10 col-md-offset-1">
                                                    <!--<h4 class="separate-above">-->
                                                        <!--<span ng-bind="::enroll.strings.COPY_ASSISTANT_NUMBER"></span>-->
                                                        <!--<span ng-bind="$index + 1"></span>-->
                                                    <!--</h4>-->
                                                    <i class="glyphicon glyphicon-remove text-muted pull-right"
                                                       ng-click="enroll.removeAssistant($index)"
                                                       title="Remove Assistant"></i>
                                                    <div class="form-group" trulii-input-errors-control="first_name">
                                                        <label class="control-label"
                                                               ng-bind="::enroll.strings.LABEL_FIRST_NAME"></label>
                                                        <input class="form-control" name="first_name" type="text"
                                                               placeholder="{{::enroll.strings.LABEL_FIRST_NAME}}"
                                                               ng-model="assistant.first_name" required/>
                                                    </div>
                                                    <div class="form-group" trulii-input-errors-control="last_name">
                                                        <label class="control-label" ng-bind="::enroll.strings.LABEL_LAST_NAME"></label>
                                                        <input class="form-control" name="last_name" type="text"
                                                               ng-model="assistant.last_name"
                                                               placeholder="{{::enroll.strings.LABEL_LAST_NAME}}" required/>
                                                    </div>
                                                    <div class="form-group" trulii-input-errors-control="email">
                                                        <label class="control-label" ng-bind="::enroll.strings.LABEL_EMAIL"></label>
                                                        <input class="form-control col-md-2" name="email" type="email"
                                                               ng-model="assistant.email"
                                                               placeholder="{{::enroll.strings.LABEL_EMAIL}}"
                                                               required/>
                                                    </div>
                                                    <div class="form-group" trulii-input-errors-control="detail">
                                                        <input type="hidden" name="detail"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card card-list-item card-list-item--empty card-list-item--instructor" style="height: 20em;">
                                            <div>
                                                <div class="card-list-item__add-icon" ng-click="enroll.addAssistant()" >
                                                    <br/>
                                                    <div>Agregar Asistente</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>
            <!--Payment Methods-->
            <div class="row">
                <div class="col-md-12">
                    <div class="panel payments-panel">
                        <div class="panel-heading">
                            <h4>
                                <img class="img-responsive inline-block"
                                     src="css/img/activity-enroll/section_payments.png"
                                     alt="{{::enroll.strings.LABEL_PAYMENT_INFO}}"/>
                                <span ng-bind="::enroll.strings.LABEL_PAYMENT_INFO"></span>
                            </h4>
                        </div>
                        <div class="panel-body">
                            <ul class="nav nav-tabs nav-tabs-light" style="margin-bottom: 15px;">
                                <li ng-class="{'active': !enroll.paymentWithPse}"
                                    ng-click="enroll.changeCCPaymentMethod()">
                                    <a href="">Crédito</a>
                                </li>
                                <li ng-class="{'active': enroll.paymentWithPse}"
                                    ng-click="enroll.changePSEPaymentMethod()">
                                    <a href="">
                                        <img src="css/img/activity-enroll/logo_PSE.png" alt="PSE"/>
                                    </a>
                                </li>
                            </ul>
                            <div class="separate-below">
                                <!--Credit Card-->
                                <div class="fade in" ng-hide="enroll.paymentWithPse">
                                    <div class="row">
                                        <div class="col-md-8 col-md-offset-2">
                                            <div class="row">
                                                <div class="col-md-12 text-center separate-above">
                                                    <img src="css/img/activity-enroll/card_mastercard.png" alt="Mastercard"/>
                                                    <img src="css/img/activity-enroll/card_visa.png" alt="Visa"/>
                                                    <img src="css/img/activity-enroll/card_amex.png" alt="American Express"/>
                                                    <img src="css/img/activity-enroll/card_discover.png" alt="Discover"/>
                                                    <img src="css/img/activity-enroll/card_diners.png" alt="Diners"/>
                                                </div>
                                            </div>
                                            <div class="row separate-above">
                                                <div class="col-md-12">
                                                    <div class="form-group" trulii-input-errors-control="cardHolder">
                                                        <label for="cardHolder" ng-bind="::enroll.strings.LABEL_CARD_HOLDER"></label>
                                                        <input type="text" name="cardHolder"class="form-control" id="cardHolder"
                                                               ng-model="enroll.cardData.name_card"
                                                               placeholder="{{::enroll.strings.PLACEHOLDER_CARD_HOLDER}}">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-9 separate-above">
                                                    <div class="form-group" trulii-input-errors-control="cardNumber">
                                                        <label for="cardNumber" ng-bind="::enroll.strings.LABEL_CARD_NUMBER"></label>
                                                        <input type="text" class="form-control" name="cardNumber" id="cardNumber"
                                                               ng-model="enroll.cardData.number"
                                                               ng-blur="enroll.getCardType()"
                                                               ng-change="enroll.getCardType()"
                                                               placeholder="{{::enroll.strings.PLACEHOLDER_CARD_NUMBER}}">
                                                        <div class="form-group" trulii-input-errors-control="invalidNumber">
                                                            <input type="hidden" name="invalidNumber"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 separate-above-medium text-center">
                                                    <div class="form-group" trulii-input-errors-control="cardMethod">
                                                        <span class="form-control-static"
                                                           ng-show="enroll.cardData.method"
                                                           ng-bind="enroll.cardData.method"></span>
                                                        <input type="hidden" ng-model="enroll.cardData.method" name="cardMethod"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <span ng-bind="::enroll.strings.LABEL_EXPIRY_DATE"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <div class="form-group" trulii-input-errors-control="cardMonth">
                                                        <label for="cardMonth" ng-bind="::enroll.strings.LABEL_MONTH"></label>
                                                        <input type="number" name="cardMonth" min=1 max=12 class="form-control" id="cardMonth"
                                                               ng-model="enroll.cardData.exp_month"
                                                               ng-blur="enroll.checkCardExpiry()"
                                                               placeholder="{{::enroll.strings.PLACEHOLDER_MONTH}}">
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-md-offset-1">
                                                    <div class="form-group" trulii-input-errors-control="cardYear">
                                                        <label for="cardYear" ng-bind="::enroll.strings.LABEL_YEAR"></label>
                                                        <input type="number" name="cardYear" class="form-control" id="cardYear"
                                                               ng-model="enroll.cardData.exp_year"
                                                               ng-blur="enroll.checkCardExpiry()"
                                                               placeholder="{{::enroll.strings.PLACEHOLDER_YEAR}}">
                                                    </div>
                                                </div>
                                                <div class="col-md-3  col-md-offset-1">
                                                    <div class="form-group">
                                                        <label for="cardCvv" ng-bind="::enroll.strings.LABEL_CVV"></label>
                                                        <input type="text" class="form-control" id="cardCvv"
                                                               ng-model="enroll.cardData.cvv"
                                                               placeholder="{{::enroll.strings.PLACEHOLDER_CVV}}">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group" trulii-input-errors-control="invalidExpiry">
                                                        <input type="hidden" ng-model="enroll.cardData.invalidExpiry" class="form-control" name="invalidExpiry"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--PSE-->
                                <div class="fade in" ng-show="enroll.paymentWithPse">
                                    <div class="row">
                                        <trulii-preloader loader-control="enroll.loading_banks_list"></trulii-preloader>
                                        <div class="col-md-8 col-md-offset-2 separate-above" ng-show="!enroll.loading_banks_list" >
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group" trulii-input-errors-control="bank">
                                                        <label for="bank" ng-bind="::enroll.strings.LABEL_BANK"></label>
                                                        <select  class="form-control input-sm" name="bank" id="bank"
                                                                 ng-model="enroll.pseData.selectedBank"
                                                                 ng-options="bank as bank.description for (index,bank) in enroll.pseFormData.banksList">
                                                            <option value="" ng-show="!enroll.pseData.selectedBank"
                                                                    ng-bind="::enroll.strings.OPTION_BANK_DEFAULT" selected>

                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row separate-above-less">
                                                <div class="col-md-12">
                                                    <div class="form-group" trulii-input-errors-control="idType">
                                                        <label for="idType" ng-bind="::enroll.strings.LABEL_ID_TYPE"></label>
                                                        <select  class="form-control input-sm" name="idType" id="idType"
                                                                 ng-model="enroll.pseData.selectedIdType"
                                                                 ng-options="type  as type.description for (index,type) in enroll.pseFormData.idTypes">
                                                            <option value="" ng-show="!enroll.pseData.selectedBank"
                                                                    ng-bind="::enroll.strings.OPTION_ID_TYPE_DEFAULT" selected>
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row separate-above-less">
                                                <div class="col-md-4">
                                                    <div class="form-group" trulii-input-errors-control="userType">
                                                        <label for="userType" ng-bind="::enroll.strings.LABEL_USER_TYPE"></label>
                                                        <select  class="form-control input-sm" name="userType" id="userType"
                                                                 ng-model="enroll.pseData.selectedUserType"
                                                                 ng-options="type  as type.description for (index,type) in enroll.pseFormData.userTypes">
                                                            <option value="" ng-show="!enroll.pseData.selectedBank"
                                                                    ng-bind="::enroll.strings.OPTION_USER_TYPE_DEFAULT" selected>
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-7 col-md-offset-1">
                                                    <div class="form-group" trulii-input-errors-control="idNumber">
                                                        <label for="idNumber" ng-bind="::enroll.strings.LABEL_ID_NUMBER"></label>
                                                        <input type="text" name="idNumber" id="idNumber" class="form-control"
                                                               ng-model="enroll.pseData.idNumber">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-group" trulii-input-errors-control="name">
                                                        <label for="name" ng-bind="::enroll.strings.LABEL_CLIENT_NAME_LAST_NAME"></label>
                                                        <input type="text" name="name" id="name" class="form-control"
                                                               ng-model="enroll.pseData.name">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-5">
                                                    <div class="form-group" trulii-input-errors-control="payerEmail">
                                                        <label for="payerEmail" ng-bind="::enroll.strings.LABEL_EMAIL"></label>
                                                        <input type="email" name="payerEmail" id="payerEmail" class="form-control"
                                                               ng-model="enroll.pseData.payerEmail">
                                                    </div>
                                                </div>
                                                <div class="col-md-5 col-md-offset-2">
                                                    <div class="form-group" trulii-input-errors-control="contactPhone">
                                                        <label for="contactPhone" ng-bind="::enroll.strings.LABEL_PHONE_NUMBER"></label>
                                                        <input type="text" name="contactPhone" id="contactPhone" class="form-control"
                                                               ng-model="enroll.pseData.contactPhone">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer">
                            <button class="btn btn-block btn-default separate-above text-uppercase"
                                    ng-bind="::enroll.strings.ACTION_VIEW_RETURN_POLICY" ng-click="enroll.toggleReimbursement()"></button>
                            <button class="btn btn-block btn-primary separate-above text-uppercase"
                                    ng-click="enroll.enroll()"
                                    ng-bind="::enroll.strings.ACTION_ENROLL" ></button>
                            <div class="text-muted separate-above-more" >
                                <span ng-bind="::enroll.strings.COPY_RELEASE"></span> <span><a href="javascript:void(0)" ng-bind="::enroll.strings.ACTION_VIEW_TERMS" ng-click="enroll.toggleTerms()"></a></span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" trulii-input-errors-control="generalError">
                        <input type="hidden" ng-model="enroll.pseData.generalError" name="generalError"/>
                    </div>
                </div>
            </div>
        </form>
        <div ui-view></div>
        <a class="btn btn-link" ui-sref="activities-detail({activity_id: enroll.activity.id})">
            <i class="mdi-navigation-chevron-left"></i>
            <span ng-bind="::enroll.strings.ACTION_RETURN"></span>
        </a>
    </div>
    <div class="col-md-3">
        <div class="organizer-widget">
            <a class="card" ui-sref="organizer-profile({organizer_id: enroll.activity.organizer.id})">
                <img class="picture" ng-src="{{::enroll.getOrganizerPhoto()}}"
                     alt="{{::enroll.activity.organizer.name}}"/>
                <div class="data">
                    <div class="name" ng-bind="::enroll.activity.organizer.name"></div>
                    <div class="location" ng-bind="::enroll.activity.organizer.locations[0].address"></div>
                </div>
            </a>
        </div>

        <div class="billing-widget separate-above">
            <div class="invoice">
                <h5><strong>Facturación</strong></h5>
                <div class="row separate-above">
                    <div class="col-md-6 item">
                        <span>Cupos X </span><span ng-bind="enroll.assistants.length"></span>
                    </div>
                    <div class="col-md-6 value">
                        <span ng-bind="enroll.calendar.session_price | currency"></span>
                    </div>
                </div>
                <div class="row" ng-repeat="assistant in enroll.assistants" ng-if="assistant.first_name">
                    <div class="col-md-6 sub-item">
                        <span ng-bind="assistant.first_name"></span> <span ng-bind="assistant.last_name"></span>
                    </div>
                    <div class="col-md-6 sub-value">
                        <span ng-bind="enroll.calendar.session_price | currency"></span>
                    </div>
                </div>
                <!--Coupons-->
                <div class="row separate-above" ng-hide="enroll.hasCouponApplied">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label for="inputCoupon" class="sr-only">Aplicar Cupon</label>
                            <div class="col-md-8 no-padding">
                                <input type="text" class="form-control input-sm" id="inputCoupon" placeholder="Aplicar Cupon">
                            </div>
                            <button class="col-md-3 pull-right btn btn-xs btn-default">Aplicar</button>
                        </div>
                    </div>
                </div>
                <div class="row separate-above" ng-show="enroll.hasCouponApplied">
                    <div class="col-md-6 item">
                        <span>Cupos X </span><span ng-bind="enroll.assistants.length"></span>
                    </div>
                    <div class="col-md-6 value">
                        <span ng-bind="enroll.calendar.session_price | currency"></span>
                    </div>
                </div>
            </div>
            <div class="total">
                <div class="row">
                    <div class="col-md-12">
                        <span class="item">Total a Pagar</span>
                        <span class="value" ng-bind="enroll.calendar.session_price | currency"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
