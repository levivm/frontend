@import url('../_trulii-variables');

@sidebar-float-class: --float;

.sidebar{
	font-family: @font-sans;
	position: fixed;
	top: @navbar-height;
	bottom: 0;
	left: 0;
	display: block;
	z-index: 1000;
	overflow-x: visible;
	overflow-y: auto;
	padding: 20px 0 0 0;
	background-color: @sidebar-color;
	width: @sidebar-width;
	max-height: ~"calc(100vh - 80px)";
  transition: transform 0.5s;
	
  .before-sm({
    top: @navbar-short-height;
    max-height: ~"calc(100vh - 60px)";
  });
  
  &-short{
		top: @navbar-short-height;
		max-height: ~"calc(100vh - 60px)" !important;
		&.@{sidebar-float-class}{
			max-height: ~"calc(100vh - 80px)" !important;
		}
	}
	a:hover{
		color: @primary;
	}

	&__activity{
		padding: 1em.5em;
		display: block;
		width: 100%;
		height: 9em;
		color: white;
		font-size: 1.2em;
		text-align: center;
		position: relative;
		&:extend(.img-size-cover);
		&:extend(.img-position-center);

		&__title{
			display: block;
			height: 3em;
			overflow: hidden;
			margin-bottom: .5em
		}

		&__btn-back{
			color: white;
			display: block;
			margin-top: 1em;
			font-size: .8em;
		}

		&:after{
			content: '';
			display: block;
			position: absolute;
			background: fadeout(@sidebar-color, 55%) ;
			width: 100%;
			height: 100%;
			top: 0;
			right: 0;
			z-index: 1;

		}

		& *{
			position: relative;
			z-index: 10;
		}

	}

	&__item{
		border-radius: 0px;
		position: relative;
		color: @darkbg-text;
		display: block;
		width: 100%;
		padding: 10px;
		padding-left: 2em;
		text-decoration: none;
		line-height: 3em;
		cursor: pointer;
		font-family: @font-sans-alt;
		font-weight: 500;
		font-size: .9em;
		border-left: 5px solid transparent;

		&--selected{
			background: lighten(@dark-element, 10%);
			//border-top: 1px solid @color-delimeter-light;
			//border-right: 1px solid $color-delimeter-light
			border-left: 5px solid @primary;
			transition: ease all 0.1s;
			color: @primary;

			.@{sidebar-float-class} &{
				background: lighten(@gray-light, 50%);
				font-weight: bold !important;
				color: @success !important;
				border-width: 0;
			}
			&:focus{
				color:@primary;
			}
		}

		&:hover, &:focus{
			text-decoration: none;
			outline: 0;

			.@{sidebar-float-class} &{
				color: @success;
			}
		}

		&:first-child{
			margin-top: 20px;
		}

		&__icon{
			top: 0;
			bottom: 0;
			margin-right: .3em;

			&:before {
				position: relative;
				top: 0.2em;
				font-size: .8em;
				margin-right: .3em;
			}
		}

		.@{sidebar-float-class} &{
			color: @lightbg-text;
			font-weight: normal;
			margin: 0;

			&.--muted{
				color: lighten(@gray-light, 20%);
			}
		}
	}

	li {
		display: block;
	}
	.list-inline{
		li{
			display: inline-block;
		}
	}
	&__bottom-action-container{
		position: fixed;
		bottom: 0px;
		width: inherit;
		border-top: 1px solid @gray-light;
		.sidebar__bottom-action{
			margin-top: 0;
		}
	}
	&__bottom-action {
		background: @sidebar-color;
		width: 100%;
		padding: 1em;
		margin-top: 2em;
		font-family: @font-sans-alt;
		font-weight: normal;
		font-size: .9em;
		color: @gray-lightest;

		hr{
			display: block;
			width: 100%;
			margin: 1.6em 0;
			height: 0;

			&:before{
				content: '';
				display: inline-block;
				border-bottom: 1px solid @gray-light;
				width: 20%;
				vertical-align: top;
			}
		}

		.btn{
			font-size: 1.3em;
			margin-top: 1em;
			width: 100%;
			font-weight: bold;
			line-height: 1.5em;
		}
		&-dark{
			background-color: @gray-darker;
		    padding: 1em 0em 0.25em 0em;
			a{
				color: @gray-light;
				text-decoration: none;
			}
		}

	}

	.mandatory-mark{
		display: inline-block;
		width: 8px;
		height: 8px;
		background-color: @brand-primary;
		border-radius: 50%;

		&.--right{
			float: right;
			margin: 1.2em;
		}
	}

	& + *{
		padding-left: @sidebar-width;
		margin-left: 0;
        .before-md({ 
            padding-left: 0; 
        });
	}

	&.@{sidebar-float-class}{
		background-color: white;
		border: 1px solid @gray-light-medium;
		margin: 1em;
		border-radius: @border-radius-standard;
		bottom: auto;
		padding-bottom: 0;
		max-height: ~"calc(100vh - 100px)";
		overflow-y: auto;
	}
    
    &.ng-hide{
        transform: translateX(-@sidebar-width);
    }
    
}


.sidebar-mobile-toggle{
    color: @gray;
    width: ~"calc(100% - 150px)";
    background-color: white;
    height: @navbar-short-height - 1;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 5000;
    transition: @transition-navbar;
    padding: 1em 1em;
    &.short{
       height: @navbar-short-height;
    }
    &:focus, &:hover{
        color: @gray;
    }
}
.with-sidebar{
    .col-xs-12;
    padding-bottom: 80px;
}
@media print {
    .with-sidebar{
        margin: 0 20px 0 20px;
    }
}
